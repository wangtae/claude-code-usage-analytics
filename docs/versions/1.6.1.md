# Version 1.6.1

**Release Date:** 2025-11-15

## ğŸ› Bug Fixes

### Untrusted Folder ê°ì§€ ë° ì•ˆë‚´ ë©”ì‹œì§€ ê°œì„ 

Claude Codeê°€ ì‹ ë¢°í•˜ì§€ ì•ŠëŠ” í´ë”ì—ì„œ ì‹¤í–‰ë  ë•Œ ë°œìƒí•˜ëŠ” "Limits update failed" ì˜¤ë¥˜ì— ëŒ€í•œ ëª…í™•í•œ ì•ˆë‚´ ë©”ì‹œì§€ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

**ë¬¸ì œ ìƒí™©:**
- ì‚¬ìš©ìê°€ untrusted folder(ì˜ˆ: `/home/username`)ì—ì„œ `ccu`ë¥¼ ì‹¤í–‰
- Claude Codeì˜ `/usage` ëª…ë ¹ì–´ê°€ "Error: Failed to load usage data" ë°˜í™˜
- ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê²½ê³  ì—†ì´ ê³„ì† ì‹¤í–‰ë˜ì–´ ì‚¬ìš©ì í˜¼ë€ ë°œìƒ

**í•´ê²° ë°©ë²•:**
1. **ì—ëŸ¬ ê°ì§€**: `capture_limits()` í•¨ìˆ˜ì—ì„œ "Error: Failed to load usage data" ë©”ì‹œì§€ ê°ì§€
2. **ëª…í™•í•œ ì•ˆë‚´**: ì‚¬ìš©ìì—ê²Œ í´ë” ì‹ ë¢° ì ˆì°¨ë¥¼ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´
3. **í”„ë¡œê·¸ë¨ ì¢…ë£Œ**: ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ í›„ ê¹”ë”í•˜ê²Œ ì¢…ë£Œ

**ì•ˆë‚´ ë©”ì‹œì§€ ë‚´ìš©:**
```
âš ï¸  Claude Codeê°€ ì‹ ë¢°í•˜ì§€ ì•ŠëŠ” í´ë”ì—ì„œ ì‹¤í–‰ë¨

ccuê°€ Usage Limits ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´ Claude Codeê°€ í˜„ì¬ í´ë”ë¥¼ ì‹ ë¢°í•´ì•¼ í•©ë‹ˆë‹¤.

í•´ê²° ë°©ë²•:
1. í„°ë¯¸ë„ì—ì„œ claude ëª…ë ¹ì–´ë¥¼ ë¨¼ì € ì‹¤í–‰í•˜ì„¸ìš”
2. Claude Codeê°€ í˜„ì¬ í´ë”ì— ëŒ€í•œ ê¶Œí•œì„ ìš”ì²­í•˜ë©´ 'Yes, continue'ë¥¼ ì„ íƒí•˜ì„¸ìš”
3. ê·¸ í›„ ccuë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”

ë˜ëŠ”:
ì‹ ë¢°ëœ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™í•œ í›„ ccuë¥¼ ì‹¤í–‰í•˜ì„¸ìš”
ì˜ˆ: cd ~/projects/my-project && ccu
```

## ğŸ”§ Technical Implementation

### ì—ëŸ¬ ê°ì§€ ë¡œì§ ì¶”ê°€

**src/commands/limits.py:**
```python
# Check if Claude Code returned an error (untrusted folder)
if 'Error: Failed to load usage data' in clean_output:
    return {
        "error": "untrusted_folder",
        "message": "Claude Code cannot load usage data in untrusted folder",
        "debug_file": debug_file.name
    }
```

### ì‚¬ìš©ì ì•ˆë‚´ ë° ì¢…ë£Œ ë¡œì§

**src/commands/usage.py:**
```python
if limits.get("error") == "untrusted_folder":
    console.clear()
    # ìƒì„¸í•œ ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ
    console.print(Panel(error_msg, border_style="yellow", title="í´ë” ê¶Œí•œ í•„ìš”"))
    console.print(f"\n[dim]Debug file: {limits.get('debug_file', 'N/A')}[/dim]")
    return  # í”„ë¡œê·¸ë¨ ì¢…ë£Œ
```

## ğŸ“ Changed Files

- `src/commands/limits.py`:
  - Untrusted folder ì—ëŸ¬ ê°ì§€ ë¡œì§ ì¶”ê°€ (170-176ì¤„)
  - ì—ëŸ¬ íƒ€ì…: "untrusted_folder"

- `src/commands/usage.py`:
  - Untrusted folder ì—ëŸ¬ í•¸ë“¤ë§ ì¶”ê°€ (1410-1438ì¤„)
  - ì‚¬ìš©ì ì•ˆë‚´ ë©”ì‹œì§€ ë° ì¢…ë£Œ ë¡œì§

- `pyproject.toml`:
  - ë²„ì „ 1.6.0 â†’ 1.6.1

## ğŸ”„ Migration Notes

ì´ ë²„ì „ì€ í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.

**ì—…ê·¸ë ˆì´ë“œ ë°©ë²•:**
```bash
# Pipx ì‚¬ìš© ì‹œ
pipx upgrade claude-code-usage-analytics

# ë˜ëŠ” ê°œë°œ ëª¨ë“œ ì¬ì„¤ì¹˜
cd /path/to/claude-code-usage-analytics
pipx install -e . --force
```

**ì£¼ì˜ì‚¬í•­:**
- Untrusted folderì—ì„œ ì‹¤í–‰ ì‹œ ì´ì œ ëª…í™•í•œ ì•ˆë‚´ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì¢…ë£Œë¨
- ê¸°ì¡´ ë™ì‘: ê²½ê³  ì—†ì´ ê³„ì† ì‹¤í–‰ (limits ë°ì´í„° ì—†ìŒ)
- ìƒˆ ë™ì‘: ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ í›„ ì¢…ë£Œ

## ğŸ’¡ Usage Tips

**ê¶Œì¥ ì‹¤í–‰ ë°©ë²•:**

1. **ì‹ ë¢°ëœ í”„ë¡œì íŠ¸ í´ë”ì—ì„œ ì‹¤í–‰:**
   ```bash
   cd ~/projects/my-project
   ccu
   ```

2. **í™ˆ ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰í•˜ë ¤ë©´:**
   ```bash
   # ë¨¼ì € Claude Codeë¡œ í´ë” ì‹ ë¢°
   cd ~
   claude
   # "Yes, continue" ì„ íƒ

   # ê·¸ í›„ ccu ì‹¤í–‰
   ccu
   ```

3. **Gist ë™ê¸°í™” í™œìš©:**
   - Settings (s) â†’ Gist Sync (f) â†’ Pull (2)
   - ë‹¤ë¥¸ PCì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ
   - Auto-sync í™œì„±í™” ê¶Œì¥

## ğŸ¯ Related Issues

ì´ íŒ¨ì¹˜ëŠ” ë‹¤ìŒ ì‚¬ìš©ì ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤:
- **ì¦ìƒ**: "Limits update failed" ê²½ê³ ê°€ ê³„ì† í‘œì‹œë¨
- **ì›ì¸**: Untrusted folderì—ì„œ Claude Code `/usage` ì‹¤íŒ¨
- **í•´ê²°**: ëª…í™•í•œ ì•ˆë‚´ ë©”ì‹œì§€ë¡œ ì‚¬ìš©ìê°€ ì§ì ‘ í•´ê²° ê°€ëŠ¥

## ğŸ” Debug Information

Untrusted folder ì—ëŸ¬ ë°œìƒ ì‹œ debug íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤:
- ìœ„ì¹˜: `/tmp/tmp*_claude_usage_debug.txt`
- ë‚´ìš©: Claude Code `/usage` ëª…ë ¹ì–´ì˜ raw output
- ìš©ë„: ë¬¸ì œ ì§„ë‹¨ ë° ë²„ê·¸ ë¦¬í¬íŠ¸

ì—ëŸ¬ ë©”ì‹œì§€ì— debug íŒŒì¼ ê²½ë¡œê°€ í‘œì‹œë˜ë¯€ë¡œ, ë¬¸ì œ í•´ê²°ì´ ì–´ë ¤ìš´ ê²½ìš° í•´ë‹¹ íŒŒì¼ì„ í™•ì¸í•˜ê±°ë‚˜ issueì— ì²¨ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
