# Version 1.2.9 - Cost Calculation Fix

Released: 2025-10-21

## üêõ Bug Fixes

### Fixed Missing Model Pricing
- Added `claude-haiku-4-5-20251001` to model pricing table
- Fixed NULL cost values in usage_records table
- Resolved cost discrepancy between KPI cards and breakdown sections

### Fixed Data Consistency Issues
- Updated global summary tables to reflect accurate costs
- Ensured consistency between UsageSummary and filtered records
- Fixed $19.26 discrepancy in Monthly/Yearly views (exactly Haiku model cost)

## üîß Technical Details

### Problem
- New Haiku 4.5 model (`claude-haiku-4-5-20251001`) wasn't in the model_pricing table
- This caused all Haiku usage records to have NULL cost values
- Global summaries showed incorrect total costs

### Solution
1. Added missing model to pricing table with correct prices:
   - Input: $0.80 per million tokens
   - Output: $4.00 per million tokens
   - Cache Write: $1.00 per million tokens
   - Cache Read: $0.08 per million tokens

2. Recalculated costs for existing records
3. Updated global summary tables

## üìä Impact
- All cost displays now show accurate values
- Monthly view: $1,640.33 (previously showed different values in different sections)
- Yearly view: Costs now properly aggregated
- Opus model now correctly appears in Tokens by Model breakdown

## üéØ Known Issues
- New models still need to be manually added to model_pricing table
- Consider implementing automatic model detection and pricing updates in future versions